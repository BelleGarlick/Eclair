<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/tomorrow.min.css"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
<script src="eclair.js"></script>
<script>    
let VBox = eclair.VBox, Toggle = eclair.Toggle, Text = eclair.Text, CheckBox = eclair.CheckBox, 
    RadioButtons = eclair.RadioButtons, TextBox = eclair.TextBox, State = eclair.State, 
    AlertState = eclair.AlertState, TextStyleState = eclair.TextStyleState;
    
    
let checkboxText = State("Accept Cookies?")
let alertBoxText = State("You're learning Eclair")
let progressValue = State(0.5)
let alertBoxTheme = AlertState().success()
let textHeadingStyle = TextStyleState().heading2()
let showProgressState = State(false)
let progressBarStripped = State(false)
let progressBarColor = eclair.Color()
    
let toggleOn = State(true)
let toggleShowLabel = State(false)
let toggleEnabled = State(true)


let alertBoxObject = eclair.Alert(alertBoxText).theme(alertBoxTheme)  //.title("Congrats")


let backgroundColour = eclair.Color().hex("#f6f6f6")


function group(elements) {
    return VBox(elements)
        .align("left")
        .spacing(30)
        .backgroundColor(backgroundColour)
        .borderRadius("3px")
        .padding("20px")
}
    
function toggleLabels(text, toggleLabel, callback) {
    return VBox([
        Text(text),
        Toggle(toggleLabel).onChange(callback),
    ]).spacing(10).align("left")
}
    

let codeView = eclair.SyntaxHighlighter()
let codeResult = eclair.IFrame()


VBox([
    eclair.HBox([
        Text("Eclair")  
            .type(textHeadingStyle)
            .fontColor("white")
    ])
        .background(eclair.theme.accent)
        .padding(8),
    
    eclair.ScrollView([
        VBox([
            CheckBox(checkboxText),
            RadioButtons().addItems(["test", "testing", "tests"]),
            RadioButtons().addItems(["also test", "also testing", "also tests"]),
            
            // Toggle Buttons
            group([
                Text("Toggle Switch").type(textHeadingStyle),
                
                VBox([
                    Toggle(toggleOn)
                        .showTick(toggleShowLabel)
                        .enabled(toggleEnabled)
                        .display("inline-block")
                ]).align("center"),
                
                eclair.HorizontalLine(),
                toggleLabels("Show tick", toggleShowLabel, c => {}),
                toggleLabels("Toggle Button", true, c => {toggleOn.value(!toggleOn.value())}),
                toggleLabels("Enabled", toggleEnabled, c => {})
            ]),
            
            
            group([
                Text("Progress Bar").type(textHeadingStyle),
                eclair.ProgressBar(progressValue)
                    .striped(progressBarStripped)
                    .color(progressBarColor)
                    .showLabel(showProgressState),
                eclair.HorizontalLine(),
                VBox([
                    Text("Progress"),
                    eclair.Slider(progressValue)
                        .min(0).max(1).step(0.01)
                ]).spacing(10).align("left"),
                
                toggleLabels("Striped", progressBarStripped, c => {}),
                toggleLabels("Show Label", showProgressState, c => {})
            ]),
            
            
            group([
                Text("Alert Box").type(textHeadingStyle),
                alertBoxObject,
                eclair.HorizontalLine(),
                VBox([
                    Text("Title"),
                    TextBox("Warning")
                        .placeholder("Title...")
//                        .onKeyUp(e => {
//                            alertBoxObject.title(e.text().length == ""? null : e.text())
//                        })
                ]).spacing(10).align("left"),
                
                VBox([
                    Text("Message"),
                    TextBox(alertBoxText).placeholder("Message..."),
                ]).spacing(10).align("left"),
                
                VBox([
                    Text("Line breaker"),
                    eclair.Button("Add line break").onClick(c => {
                        let newText = alertBox.text()
                        alertBox.text(newText + "<hr/>A new line break can be added by typing &lt;hr/&gt;.")
                        alertBox.text(newText + "<hr/>A new line break can be added by typing <hr/>.")
                    }),
                ]).spacing(10).align("left"),
                
                VBox([
                    Text("Preset"),
                    eclair.Select()
                        .addOptions(["Success", "Danger", "Warning", "Info", "Light", "Dark"])
                        .onChange(s => {
                            if (s.value() == "Success") {alertBoxTheme.success()}
                            if (s.value() == "Danger") {alertBoxTheme.danger()}
                            if (s.value() == "Warning") {alertBoxTheme.warning()}
                            if (s.value() == "Info") {alertBoxTheme.info()}
                            if (s.value() == "Light") {alertBoxTheme.light()}
                            if (s.value() == "Dark") {alertBoxTheme.dark()}
                        })
                ]).spacing(10).align("left"),
            ]),
            
            VBox([
                Text("Try it yourself!").type(textHeadingStyle),
                codeView,
                eclair.Button("Run").onClick(() => {
                    let code = '<script src="eclair.js"></scrip'+'t><script>'+codeView.value()+'</sc'+'ript>'
                    codeResult.source(code)
                }),
                codeResult
            ])
                .background("#f6f6f6")
                .borderRadius("3px")
                .padding("20px")
                .spacing(30)
        ])
            .width("600px")
            .align("left")
            .spacing(25)
            .padding(10)
    ])
])
    .position("absolute")
    .top("0px").left("0px").width("100%")
    .write()
</script>