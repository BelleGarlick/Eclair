<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/tomorrow.min.css"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
<script src="eclair.js"></script>
<script>    
let Toggle = eclair.Toggle, Text = eclair.Text, CheckBox = eclair.CheckBox, 
    RadioButtons = eclair.RadioButtons, TextBox = eclair.TextBox, State = eclair.State, 
    AlertState = eclair.AlertState, TextStyle = eclair.TextStyle, VStack = eclair.VStack,
    HStack = eclair.HStack, View = eclair.View, TabView = eclair.TabView;


let textHeadingStyle = TextStyle().heading2()
let linkText = State("DuckDuckGo")
let linkURL = State('https://duckduckgo.com/')
let linkTarget = State("_blank")


let iframeHTMLCode = State("")

let selectedTabStyle = eclair.Style()
    .backgroundColor("red")

let selectedAlertBoxColour = eclair.State()
let selectedAlertBoxColourIndex = eclair.State()
    

let backgroundColor = eclair.Color().hex("#f6f6f6")

let htmlCode = eclair.State()


let selectedRadio = eclair.State()
let selectedRadioIndex = eclair.State()

let vstackItems = eclair.State([])

let tabName = eclair.State(["Toggles", "Progress Bar", "Alert Box", "Check Box"])
let selectedTab = State(0)


function codeExample(title, code, height) {
    let tab = eclair.State(0)
    
    return VStack([
            HStack([
                Text(title).type(textHeadingStyle),
                HStack([
                    eclair.Button("Result").onClick(_=> {tab.value(0)}),
                    eclair.Button("Code").onClick(_=> {tab.value(1)})
                ])
            ])
                .justifyContent("space-between")
                .width("100%"),
            TabView(tab, [
                eclair.View([
                    eclair.IFrame()
                        .source('<script src="eclair.js"></scrip'+'t><script>'+code+'</sc'+'ript>')
                        .height(`${height}px`)
                        .borderSize("0px")
                ])
                    .width("100%"),
                eclair.View([
                    eclair.SyntaxHighlighter(code)
                        .width("100%")
                ])
                    .width("100%")
            ])  
                .width("100%")
            
        ])
            .alignment(eclair.Alignment().start())
            .backgroundColor(backgroundColor)
            .borderRadius("3px")
            .padding("20px")
            .margin("10px")
            .width("100%")
            .gap("8px")
}


VStack([   
    HStack([
        Text("Eclair Playground")  
            .type(textHeadingStyle)
            .fontColor("white")
    ])
        .width("100%")
        .background(eclair.theme.accent)
        .padding(8),
    
    
    VStack([
        {"name": State("Sam Garlick"), "age": "23"},
        {"name": State("Katie Mitchell"), "age": "22"},
        {"name": State("Isaac Jordan"), "age": "23"},
    ], (person) => {
        return eclair.HStack([
            eclair.Text(person.name),
            eclair.Text(person.age),
            eclair.TextBox(person.name),
        ])
            .background("lightblue")
            .borderRadius("3px")
            .padding("20px")
    }),
    
    eclair.VStack([
        VStack([     
            eclair.Select(tabName)
                .selectedIndex(selectedTab)
                .width("60%"),
            
            TabView(selectedTab, [
                codeExample("Toggle Switch", `// Example Toggle Code
let toggleOn = eclair.State(true)
let toggleTick = eclair.State(false)
let toggleEnabled = eclair.State(true)

// Create layout
eclair.VStack([
    // Attach states to toggle
    eclair.VStack([
        eclair.Toggle(toggleOn)
            .showTick(toggleTick)
            .enabled(toggleEnabled)
    ]).width("100%"),

    eclair.HorizontalLine(),

    // Tick mark toggle
    eclair.Text("Tick Mark"),
    eclair.Toggle(toggleTick),

    // Toggle toggle
    eclair.Text("Toggle"),
    eclair.Toggle(true)
        .onChange(e => {\n\t\ttoggleOn.toggle()\n\t}),

    // Toggle enabled
    eclair.Text("Enabled"),
    eclair.Toggle(toggleEnabled)
])
    .alignment(eclair.Alignment().start())
    .gap("8px")
    .write()
`, 220),
                
                codeExample("Progress Bar", `// Progress bar code
let progressValue = eclair.State(0.5)
let showProgressState = eclair.State(false)
let progressBarStripped = eclair.State(false)
let progressBarColor = eclair.Color()

eclair.VStack([
    eclair.ProgressBar(progressValue)
        .striped(progressBarStripped)
        .color(progressBarColor)
        .showLabel(showProgressState)
        .width("100%"),

    eclair.HorizontalLine(),

    eclair.Text("Progress"),
    eclair.Slider(progressValue)
        .min(0).max(1).step(0.01)
        .width("100%"),

    eclair.Text("Striped"),
    eclair.Toggle(progressBarStripped),

    eclair.Text("Show Label"),
    eclair.Toggle(showProgressState)
])
    .alignment(eclair.Alignment().start())
    .gap("8px")
    .write()
                `, 210),
                
                codeExample("Alert Box", `// Alert Box
let alertBoxTitle = eclair.State("Alert Box")
let alertBoxText = eclair.State("You're learning Eclair")
let alertBoxTheme = eclair.Color().success()
let selectedAlertBoxColour = eclair.State()

eclair.VStack([
    eclair.Alert(alertBoxText)
        .title(alertBoxTitle)
        .theme(alertBoxTheme)
        .width("100%")
        .boxSizing("border-box"),

    eclair.HorizontalLine(),

    eclair.Text("Title"),
    eclair.TextBox(alertBoxTitle)
        .placeholder("Title..."),

    eclair.Text("Message"),
    eclair.TextBox(alertBoxText).placeholder("Message..."),

    eclair.Text("Line breaker"),
    eclair.Button("Add line break").onClick(c => {
        alertBoxText.value(alertBoxText.value() + "<hr/>A new line break can be added by typing &lt;hr/&gt;.")
    }),

    eclair.Text("Preset"),
    eclair.Select(["Success", "Danger", "Warning", "Info", "Light", "Dark"])
        .value(selectedAlertBoxColour)
        .onChange(s => {
            if (selectedAlertBoxColour.value() == "Success") {alertBoxTheme.success()}
            if (selectedAlertBoxColour.value() == "Danger") {alertBoxTheme.danger()}
            if (selectedAlertBoxColour.value() == "Warning") {alertBoxTheme.warning()}
            if (selectedAlertBoxColour.value() == "Info") {alertBoxTheme.info()}
            if (selectedAlertBoxColour.value() == "Light") {alertBoxTheme.light()}
            if (selectedAlertBoxColour.value() == "Dark") {alertBoxTheme.dark()}
        })
])
    .alignment(eclair.Alignment().start())
    .gap("8px")
    .write()
                `, 390),
                
                codeExample("Alert Box", `// Check Box
let checkboxText = eclair.State("Accept Cookies?")
let checkBoxState = eclair.State(false)
let checkboxEnabled = eclair.State(true)

eclair.VStack([
    eclair.CheckBox(checkBoxState)
        .text(checkboxText)
        .enabled(checkboxEnabled),

    eclair.HorizontalLine(),

    eclair.TextBox(checkboxText),
    eclair.TextBox(checkBoxState),
             
    eclair.Text("Enabled"),
    eclair.Toggle(checkboxEnabled)
])
    .alignment(eclair.Alignment().start())
    .gap("8px")
    .write()
                `, 250),
            ]).width("100%"),
            
            eclair.TextBox(selectedRadio),
            eclair.TextBox(selectedRadioIndex),
            RadioButtons(tabName)
                .width("100%")
                .selectedIndex(selectedTab)
                .onClick((el, ev) => {
                    alert(ev)
                }),
            eclair.HorizontalLine(),
            RadioButtons(["tests", "test", "testing"]).width("100%"),
            
            eclair.TextArea(htmlCode),
            
            VStack([
                Text("Try it yourself!").type(textHeadingStyle),
                eclair.SyntaxHighlighter(htmlCode),
                eclair.Button("Run").onClick((self) => {
                    let code = '<script src="eclair.js"></scrip'+'t><script>'+htmlCode.value()+'</sc'+'ript>'
                    iframeHTMLCode.value(code)
                }),
                
                eclair.IFrame()
                    .height("100%")
                    .width("100%")
                    .source(iframeHTMLCode)
            ])
                .background("#f6f6f6")
                .borderRadius("3px")
                .padding("20px"),
            
            eclair.Button("Text").onClick(e => {
                vstackItems.add(eclair.TextBox())
            }),
            HStack(vstackItems),
                //.spacing(30)
        ])
//            .spacing(25)
            .padding(10)
    ])
        .alignment("stretch")
        .width("600px")
])
    .position("absolute")
    .top("0px")
    .left("0px")
    .width("100%")
    .alignment("center")
    .write()
</script>