<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/tomorrow.min.css"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
<script src="eclair.js"></script>
<script>    
let Toggle = eclair.Toggle, Text = eclair.Text, CheckBox = eclair.CheckBox, 
    RadioButtons = eclair.RadioButtons, TextBox = eclair.TextBox, State = eclair.State, 
    AlertState = eclair.AlertState, TextStyle = eclair.TextStyle, VStack = eclair.VStack,
    HStack = eclair.HStack, View = eclair.View, TabView = eclair.TabView;
    
let checkboxText = State("Accept Cookies?")
let checkBoxState = State(false)
let checkboxEnabled = State(true)

let alertBoxTitle = State("Alert Box")
let alertBoxText = State("You're learning Eclair")
let alertBoxTheme = eclair.Color().success()

let progressValue = State(0.5)
let textHeadingStyle = TextStyle().heading2()
let showProgressState = State(false)
let progressBarStripped = State(false)
let progressBarColor = eclair.Color()
    
let toggleOn = State(true)
let toggleShowLabel = State(false)
let toggleEnabled = State(true)

let linkText = State("DuckDuckGo")
let linkURL = State('https://duckduckgo.com/')
let linkTarget = State("_blank")

let selectedTab = State(0)

let htmlCode = State("Texting")


let backgroundColor = eclair.Color().hex("#f6f6f6")


function group(func) {
    return VStack(func)
        .alignment(eclair.Alignment().start())
        .backgroundColor(backgroundColor)
        .borderRadius("3px")
        .padding("20px")
        .margin("10px")
        .width("100%")
        .gap("8px")
}
    
function toggleLabels(text, toggleLabel, callback) {
    return VStack([
        Text(text),
        Toggle(toggleLabel).onChange(callback)
    ])
        .width("100%")
        .alignment(eclair.Alignment().start())
        .gap("8px")
}
    

let codeView = eclair.SyntaxHighlighter()


VStack([   
    HStack([
        Text("Eclair")  
            .type(textHeadingStyle)
            .fontColor("white")
            .margin("0px")
    ])
        .width("100%")
        .background(eclair.theme.accent)
        .padding(8),
    
    eclair.VStack([
        VStack([        
            View([
                eclair.Button("Toggles").onClick(e => {selectedTab.value(0)}),
                eclair.Button("Progress Bar").onClick(e => {selectedTab.value(1)}),
                eclair.Button("Alert Box").onClick(e => {selectedTab.value(2)}),
                eclair.Button("Check Box").onClick(e => {selectedTab.value(3)}),
            ]),
            
            TabView(selectedTab, [
                // Toggle button
                group([
                    Text("Toggle Switch").type(textHeadingStyle),

                    VStack([
                        Toggle(toggleOn)
                            .showTick(toggleShowLabel)
                            .enabled(toggleEnabled)
                    ]).width("100%"), // .align("center")

                    eclair.HorizontalLine(),
                    toggleLabels("Show tick", toggleShowLabel, c => {}),
                    toggleLabels("Toggle Button", true, c => {toggleOn.value(!toggleOn.value())}),
                    toggleLabels("Enabled", toggleEnabled, c => {})
                ]),
                
                // Progress Bar
                group([
                    Text("Progress Bar").type(textHeadingStyle),

                    eclair.ProgressBar(progressValue)
                        .striped(progressBarStripped)
                        .color(progressBarColor)
                        .showLabel(showProgressState)
                        .width("100%"),

                    eclair.HorizontalLine(),

                    Text("Progress"),
                    eclair.Slider(progressValue)
                        .min(0).max(1).step(0.01)
                        .width("100%"),

                    toggleLabels("Striped", progressBarStripped, c => {}),
                    toggleLabels("Show Label", showProgressState, c => {})
                ]),
                
                // Alert Box
                group([
                    Text("Alert Box").type(textHeadingStyle),

                    eclair.Alert(alertBoxText)
                        .title(alertBoxTitle)
                        .theme(alertBoxTheme),

                    eclair.HorizontalLine(),

                    Text("Title"),
                    TextBox(alertBoxTitle)
                        .placeholder("Title..."),

                    Text("Message"),
                    TextBox(alertBoxText).placeholder("Message..."),

                    Text("Line breaker"),
                    eclair.Button("Add line break").onClick(c => {
                        alertBoxText.value(alertBoxText.value() + "<hr/>A new line break can be added by typing &lt;hr/&gt;.")
                    }),

                    Text("Preset"),
                    eclair.Select()
                        .addOptions(["Success", "Danger", "Warning", "Info", "Light", "Dark"])
                        .onChange(s => {
                            if (s.value() == "Success") {alertBoxTheme.success()}
                            if (s.value() == "Danger") {alertBoxTheme.danger()}
                            if (s.value() == "Warning") {alertBoxTheme.warning()}
                            if (s.value() == "Info") {alertBoxTheme.info()}
                            if (s.value() == "Light") {alertBoxTheme.light()}
                            if (s.value() == "Dark") {alertBoxTheme.dark()}
                        })
                ]),
                
                // Check box
                group([
                    Text("Check Box").type(textHeadingStyle),
                    
                    CheckBox(checkBoxState)
                        .text(checkboxText)
                        .enabled(checkboxEnabled),

                    eclair.HorizontalLine(),

                    TextBox(checkboxText),
                    TextBox(checkBoxState),

                    toggleLabels("Enabled", checkboxEnabled, c => {}),
                ]),
            ]).width("100%"),
            
            RadioButtons().addItems(["test", "testing", "tests"]),
            RadioButtons().addItems(["also test", "also testing", "also tests"]),
            
            eclair.TextArea(htmlCode),
            eclair.TextArea(htmlCode).onKeyUp(e => {e.background("red")}),
            
            VStack([
                Text("Try it yourself!").type(textHeadingStyle),
                codeView,
                eclair.Button("Run").onClick((self) => {
                    let code = '<script src="eclair.js"></scrip'+'t><script>'+codeView.value()+'</sc'+'ript>'
                    self.parent.children[3].source(code)
                }),
                
                eclair.IFrame()
                    .height("100%")
                    .width("100%")
            ])
                .background("#f6f6f6")
                .borderRadius("3px")
                .padding("20px")
                //.spacing(30)
        ])
//            .spacing(25)
            .padding(10)
    ])
        .alignment("stretch")
        .width("600px")
])
    .position("absolute")
    .top("0px")
    .left("0px")
    .width("100%")
    .alignment("center")
    .write()
</script>